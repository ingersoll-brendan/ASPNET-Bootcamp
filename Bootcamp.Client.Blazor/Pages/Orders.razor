@page "/orders"
@using Bootcamp.Data.Entities

<PageTitle>Orders</PageTitle>

<div class="row justify-content-end">
	<div class="col-12">
		<h1>Orders</h1>

		<p>This component demonstrates fetching data from the server.</p>
	</div>
</div>
<div class="row align-items-end">
	<!-- Column 1: Button -->
	<div class="col-9">
		<a href="" class="btn btn-primary" role="button">Add New Order (Admin)</a>
	</div>

	<!-- Column 2: Icon, bottom-right -->
	<div class="col-1 d-flex flex-column justify-content-end align-items-end pe-0">
		<a href="#filterRow" data-bs-toggle="collapse" data-bs-target="#filterRow" aria-expanded="false" aria-controls="filterRow">
			<i class="bi bi-funnel text-primary text-secondary-hover" style="font-size: 1.5rem;"></i>
		</a>
	</div>

	<!-- Column 3: Label + Select -->
	<div class="col-2 ">
		<label for="takeValue" class="mb-1">Results per page: </label>
		<select class="form-control" id="takeValue" @bind="Take" @bind:after="() => this.UpdateFilters()">
			<option value="5">5</option>
			<option value="10">10</option>
			<option value="15">15</option>
			<option value="20">20</option>
			<option value="25">25</option>
		</select>
	</div>
</div>
<br />

<table class="table table-striped table-bordered" style="table-layout: fixed;">
	<thead>
		<tr class="collapse" id="filterRow">
			<td><button class="btn btn-primary" @onclick="() => this.UpdateFilters()">Apply Filters</button></td>
			<td><input class="form-control" @bind="Id" /></td>
			<td><input class="form-control" @bind="CustomerId" /></td>
			<td><input class="form-control" @bind="BillingAddressId" /></td>
			<td><input class="form-control" @bind="ShippingAddressId" /></td>
			<td><input class="form-control" @bind="OrderNumber" /></td>
			<td><input class="form-control" @bind="DateCreated" /></td>
			<td><input class="form-control" @bind="OrderDescription" /></td>
		</tr>
		<tr>
			<th></th>
			<th>Id <i class="btn bi @SortArray[0] p-0" @onclick="() => ChangeSortOrder(0)"></i></th>
			<th>Customer Id <i class="btn bi @SortArray[1] p-0" @onclick="() => ChangeSortOrder(1)"></i></th>
			<th>Billing Address Id <i class="btn bi @SortArray[2] p-0" @onclick="() => ChangeSortOrder(2)"></i></th>
			<th>Shipping Address Id <i class="btn bi @SortArray[3] p-0" @onclick="() => ChangeSortOrder(3)"></i></th>
			<th>Order Number <i class="btn bi @SortArray[4] p-0" @onclick="() => ChangeSortOrder(4)"></i></th>
			<th>Date Created <i class="btn bi @SortArray[5] p-0" @onclick="() => ChangeSortOrder(5)"></i></th>
			<th>Order Description <i class="btn bi @SortArray[6] p-0" @onclick="() => ChangeSortOrder(6)"></i></th>
		</tr>
	</thead>
	<tbody>
		@foreach (var order in this.OrderSearchResult.Orders)
		{
			<tr>
				<td>
					<a href=""><i class="bi bi-pencil text-primary text-secondary-hover"></i></a>
				</td>
				<td>@order.Id</td>
				<td>@order.CustomerId</td>
				<td>@order.BillingAddressId</td>
				<td>@order.ShippingAddressId</td>
				<td>@order.OrderNumber</td>
				<td>@order.DateCreated</td>
				<td>@order.OrderDescription</td>
			</tr>
		}
	</tbody>
</table>

<div class="row justify-content-end">
	<nav aria-label="Page navigation" class="col-auto">
		<ul class="pagination">
			<li class="page-item" @onclick="() => this.ChangePage(this.PageNum - 1)"><span class="page-link">Previous</span></li>
			@for (int i = 0; i < this.NumOfPages; i++)
			{
				var pageNum = i + 1;
				<li class="page-item @(this.PageNum == (i + 1) ? "active" : "")" @onclick="() => this.ChangePage(pageNum)"><span class="page-link">@(i + 1)</span></li>
			}
			<li class="page-item" @onclick="() => this.ChangePage(this.PageNum + 1)"><span class="page-link">Next</span></li>
		</ul>
	</nav>
</div>